<!-- index.html -->
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>🌟 NovelAI v4 プロンプト調整器（α）</title>
  <link rel="stylesheet" href="styles.css" />

  <!-- Drag&Drop 用に Sortable.js（CDN）を読み込み -->
  <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
</head>
<body>
  <h1>
  🌟 NovelAI v4 プロンプト調整器（α）
  <button id="theme-toggle">🌙 ダークモード</button>
</h1>


  <!-- グリッドレイアウト：3列構成 -->
  
<div class="grid-wrapper">

  <!-- 補完スペース（右上に独立配置） -->
  <div class="extra-section section" style="position: absolute; top: 100px; right: 20px; width: 300px; max-height: calc(100vh - 140px); overflow-y: auto;">
    <div class="section-header">
      <span>📌 補完スペース</span>
    </div>
    <div id="extra-list" class="extra-list"></div>
    <div class="extra-controls">
      <select id="extra-target" class="extra-select"></select>
      <button class="load-extra-button" onclick="loadSelectedExtras()">📥 読み込む</button>
      <button class="delete-extra-button" onclick="deleteSelectedExtras()">🗑️ 削除</button>
      <button class="clear-extra-button" onclick="clearPrompt('extra')">🗑️ 全削除</button>
    </div>
  </div>

    <!-- ─── 1行目 ─── -->
    <!-- カラム1：テンプレート管理 -->
    <div class="section template-section">
      <div class="section-header">
        <span>📂 テンプレート管理</span>
      </div>
      <div class="template-controls">
        <input
          type="text"
          id="template-name-input"
          placeholder="テンプレート名を入力"
          style="flex: 1;"
        />
        <button onclick="saveTemplate()">💾 保存</button>
      </div>
      <div class="template-controls">
        <select id="template-select">
          <option value="">-- テンプレートを選択 --</option>
        </select>
        <button onclick="loadTemplate()">📥 読み込み</button>
        <button onclick="deleteTemplate()">🗑️ 削除</button>
      </div>
    </div>

    <!-- カラム2：タグ検索（準備中） -->
    <div class="section search-section">
      <div class="section-header">
        <span>🔎 タグ検索（準備中）</span>
      </div>
      <div class="template-controls">
        <input
          type="text"
          id="tag-search-input"
          placeholder="タグを検索（※現在使用できません）"
          disabled
          style="flex: 1;"
        />
        <select id="tag-search-target">
          <option value="base">ベースプロンプト</option>
          <option value="character-0">キャラクタープロンプト 1</option>
          <option value="negative">ネガティブプロンプト</option>
          <option value="extra">補完スペース</option>
        </select>
        <button onclick="alert('この機能はまだ実装されていません')">➕ 追加</button>
      </div>
    </div>

    <!-- カラム3：補完スペース -->
    <div class="section extra-section">
      <div class="section-header">
        <span>📌 補完スペース</span>
      </div>
      <div id="extra-list" class="extra-list"></div>
      <div class="extra-controls">
        <select id="extra-target" class="extra-select"></select>
        <button class="load-extra-button" onclick="loadSelectedExtras()">📥 読み込む</button>
        <button class="delete-extra-button" onclick="deleteSelectedExtras()">🗑️ 削除</button>
        <button class="clear-extra-button" onclick="clearPrompt('extra')">🗑️ 全削除</button>
      </div>
    </div>

    <!-- ─── 2行目 ─── -->
    <!-- カラム1～2をまたいで：タグ読み込み -->
    <div class="section tag-loading span-two-columns">
      <div class="section-header">
        <span>タグ読み込み</span>
      </div>
      <input
        type="text"
        id="tag-input"
        placeholder="カンマ区切りのタグを入力"
        style="width: 100%;"
      />
      <select id="target-section"></select>
      <button onclick="loadTags()">読み込む</button>
    </div>
    <div></div> <!-- カラム3 は空白（補完スペースを続けて表示） -->

    <!-- ─── 3行目以降 ─── -->
    <!-- カラム1～2をまたいで：ベース～ネガティブまで -->
    <div class="span-two-columns">
      <!-- ベースプロンプト欄 -->
      <div class="section">
        <div class="section-header">
          <span>ベースプロンプト</span>
          <div class="header-buttons">
            <button onclick="copyPrompt('output-base')">📋 コピー</button>
            <button onclick="clearPrompt('base')">🗑️ 全削除</button>
          </div>
        </div>
        <div id="base" class="tag-container"></div>
        <div class="prompt-output-box">
          <p id="output-base"></p>
        </div>
      </div>

      <!-- キャラクタープロンプト欄（項目1 を初期表示） -->
      <div id="character-sections"></div>
      <button class="add-button" onclick="addCharacterPrompt()">＋キャラクタープロンプト追加</button>

      <!-- ネガティブプロンプト欄 -->
      <div class="section">
        <div class="section-header">
          <span>ネガティブプロンプト</span>
          <div class="header-buttons">
            <button onclick="copyPrompt('output-negative')">📋 コピー</button>
            <button onclick="clearPrompt('negative')">🗑️ 全削除</button>
          </div>
        </div>
        <div id="negative" class="tag-container"></div>
        <div class="prompt-output-box">
          <p id="output-negative"></p>
        </div>
      </div>
    </div>
    <div></div> <!-- カラム3 は空白 -->
  </div>

  <script src="script.js"></script>
</body>
</html>
